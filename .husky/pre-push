#!/bin/sh

echo "" >&2
echo "ðŸ” [pre-push] Playwright ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œä¸­..." >&2
echo "" >&2

cd apps/cool-app

if bun run playwright:e2e:snapshot:check; then
  echo "" >&2
  echo "âœ… [pre-push] ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãƒã‚§ãƒƒã‚¯æˆåŠŸï¼pushã‚’ç¶šè¡Œã—ã¾ã™ã€‚" >&2
  echo "" >&2
else
  echo "" >&2
  echo "âŒ [pre-push] ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãƒã‚§ãƒƒã‚¯å¤±æ•—ï¼" >&2
  echo "" >&2
  echo "ðŸ“‹ å¯¾å‡¦æ–¹æ³•:" >&2
  echo "  1. å·®åˆ†ã‚’ç¢ºèª:  cd apps/cool-app && bun run playwright:report" >&2
  echo "  2. æ„å›³ã—ãŸå¤‰æ›´ã®å ´åˆ: bun run playwright:e2e:snapshot:update ã§ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³æ›´æ–°" >&2
  echo "  3. ãƒã‚°ã®å ´åˆ: ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£" >&2
  echo "  4. ç·Šæ€¥æ™‚: git push --no-verify ã§ã‚¹ã‚­ãƒƒãƒ—å¯èƒ½" >&2
  echo "" >&2
  exit 1
fi
