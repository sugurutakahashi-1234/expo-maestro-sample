appId: com.sugurutakahashi.coolapp
---
# ==========================================
# Maestro ãƒ†ã‚¹ãƒˆå®Ÿè£…æ™‚ã®ãƒãƒã‚Šãƒã‚¤ãƒ³ãƒˆé›†
# ==========================================
#
# 1. Maestro Studioã¨CLIã®åŒæ™‚ä½¿ç”¨ä¸å¯ï¼ˆæœ€é‡è¦ï¼ï¼‰
#    - Maestro StudioãŒèµ·å‹•ã—ã¦ã„ã‚‹ã¨ã€CLIã§launchAppãŒæ©Ÿèƒ½ã—ãªã„
#    - ãƒãƒ¼ãƒˆ7001ã®ç«¶åˆãŒåŸå› ï¼ˆä¸¡è€…ãŒåŒã˜ãƒãƒ¼ãƒˆã‚’ä½¿ç”¨ï¼‰
#    - å¯¾ç­–: CLIãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚ã¯å¿…ãšMaestro Studioã‚’çµ‚äº†ã™ã‚‹
#    - å‚è€ƒ: https://github.com/mobile-dev-inc/maestro/issues/1927
#
# 2. iOSã§ã®accessibilityLabelå¿…é ˆ
#    - iOSã§ã¯accessibilityLabelã‚’è¨­å®šã—ãªã„ã¨MaestroãŒè¦ç´ ã‚’èªè­˜ã§ããªã„
#    - ç‰¹ã«ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ãƒœã‚¿ãƒ³ãªã©ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªè¦ç´ ã§å¿…é ˆ
#    - React Nativeã®accessibilityLabelå±æ€§ã‚’ä½¿ç”¨ã—ã¦è¨­å®šã™ã‚‹
#    - å‚è€ƒ: https://reactnative.dev/docs/accessibility#accessibilitylabel
#    - å‚è€ƒ: https://docs.maestro.dev/platform-support/ios-uikit
#
# 3. iOSã®ç‰©ç†ãƒ‡ãƒã‚¤ã‚¹ã¯éå¯¾å¿œ
#    - Maestroã¯ç¾æ™‚ç‚¹ã§iOSã®ç‰©ç†ãƒ‡ãƒã‚¤ã‚¹ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„
#    - iOSãƒ†ã‚¹ãƒˆã¯ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã®ã¿ã§å®Ÿè¡Œå¯èƒ½
#    - Androidã¯ç‰©ç†ãƒ‡ãƒã‚¤ã‚¹ã§ã‚‚ãƒ†ã‚¹ãƒˆå¯èƒ½
#    - å‚è€ƒ: https://docs.maestro.dev/getting-started/installing-maestro#connecting-to-your-device
#
# 4. ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãƒ‘ã‚¹ã®æŒ‡å®šæ–¹æ³•
#    - ãƒ‘ã‚¹ã¯YAMLãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ.maestro/app-flow.yamlï¼‰ã‹ã‚‰ã®ç›¸å¯¾ãƒ‘ã‚¹ã¨ã—ã¦è§£é‡ˆã•ã‚Œã‚‹
#    - "screenshots/ios/xxx" â†’ ".maestro/screenshots/ios/xxx.png" ã«ä¿å­˜ã•ã‚Œã‚‹
#    - runFlowå†…ã§ã‚‚åŒæ§˜ã«ç›¸å¯¾ãƒ‘ã‚¹ã§æŒ‡å®šã™ã‚‹
#
# 5. maestro.platformã‚’ä½¿ã£ãŸå‹•çš„ãƒ‘ã‚¹ç”Ÿæˆ
#    - evalScriptã§ä¸€åº¦ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’å–å¾—: evalScript: ${output.platform = maestro.platform}
#    - ä»¥é™ã€å¤‰æ•°å±•é–‹ã§ãƒ‘ã‚¹ã‚’å‹•çš„ç”Ÿæˆ: screenshots/${output.platform}/home-tab
#    - ã“ã‚Œã«ã‚ˆã‚Šã€runFlow + when ã‚’ä½¿ã‚ãšã«ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¥ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆä¿å­˜ãŒå¯èƒ½
#
# 6. whenæ¡ä»¶ã¯runFlowã¨runScriptã§ã®ã¿ä½¿ç”¨å¯èƒ½
#    - ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ†å²ï¼ˆwhen: platform: android/iosï¼‰ã‚’ä½¿ã„ãŸã„å ´åˆã€
#      å¿…ãšrunFlowã¾ãŸã¯runScriptã§å›²ã‚€å¿…è¦ãŒã‚ã‚‹
#    - takeScreenshotã€tapOnã€assertVisibleãªã©ã®é€šå¸¸ã‚³ãƒãƒ³ãƒ‰ã«ç›´æ¥whenã¯ä½¿ãˆãªã„
#    - ä¾‹: - takeScreenshot: xxx ã« when: platform: ios ã¯ä»˜ã‘ã‚‰ã‚Œãªã„
#    - æ­£ã—ãã¯: - runFlow: { when: { platform: ios }, commands: [- takeScreenshot: xxx] }
#    - å‚è€ƒ: https://docs.maestro.dev/advanced/conditions
#
# ==========================================

- launchApp:
    appId: "com.sugurutakahashi.coolapp"
    clearState: true

# maestro.platformã‚’ä½¿ç”¨ã—ãŸãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¤å®šï¼ˆæœ€åˆã«1å›ã ã‘å®Ÿè¡Œï¼‰
- evalScript: ${output.platform = maestro.platform}

# ãƒ›ãƒ¼ãƒ ç”»é¢ã®ç¢ºèª
- assertVisible: "Expo ãƒ¢ãƒãƒ¬ãƒ with Bun"
- assertVisible: "ğŸ“š è¨˜äº‹ãƒªã‚¹ãƒˆ"
- takeScreenshot: screenshots/${output.platform}/home-tab

# è¨˜äº‹ãƒªã‚¹ãƒˆã®ç¢ºèªã¨è©³ç´°ç”»é¢ã¸ã®é·ç§»
- assertVisible: "Expo Routerã®å§‹ã‚æ–¹"
- tapOn: "Expo Routerã®å§‹ã‚æ–¹"
- assertVisible: "è¨˜äº‹è©³ç´°"
- assertVisible: "ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«"

# æˆ»ã‚‹
- runFlow:
    when:
      platform: android
    commands:
      - tapOn: Navigate up
- runFlow:
    when:
      platform: ios
    commands:
      - tapOn: è¨˜äº‹ä¸€è¦§

# ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚¹ãƒˆ - é·ç§»ã‚¿ãƒ–
- tapOn: "é·ç§»"
- assertVisible: "ç”»é¢é·ç§»ãƒ‡ãƒ¢"
- takeScreenshot: screenshots/${output.platform}/transition-tab

# ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚¹ãƒˆ - ã“ã®ã‚¢ãƒ—ãƒªã«ã¤ã„ã¦
- tapOn: "ã“ã®ã‚¢ãƒ—ãƒªã«ã¤ã„ã¦"
- assertVisible: "ã“ã®ã‚¢ãƒ—ãƒªã«ã¤ã„ã¦ã®èª¬æ˜"
- takeScreenshot: screenshots/${output.platform}/about-tab

# ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚¹ãƒˆ - ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
- tapOn: "ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«"
- assertVisible: "ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±"
- takeScreenshot: screenshots/${output.platform}/profile-tab
# ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹
- tapOn: "ãƒ›ãƒ¼ãƒ "
- assertVisible: "ğŸ“š è¨˜äº‹ãƒªã‚¹ãƒˆ"

# ãƒ­ã‚°ã‚¤ãƒ³ãƒ‡ãƒ¢ãƒœã‚¿ãƒ³ã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
- scrollUntilVisible:
    element:
        text: "ãƒ­ã‚°ã‚¤ãƒ³ãƒ‡ãƒ¢ (Maestroãƒ†ã‚¹ãƒˆç”¨)"
    direction: DOWN
    timeout: 10000

# ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã®ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ãƒ†ã‚¹ãƒˆ
- tapOn: "ãƒ­ã‚°ã‚¤ãƒ³ãƒ‡ãƒ¢ (Maestroãƒ†ã‚¹ãƒˆç”¨)"
- assertVisible: "ãƒ­ã‚°ã‚¤ãƒ³"
- assertVisible: "Maestroãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ãƒ‡ãƒ¢"

# ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å…¥åŠ›
- tapOn:
    id: "email-input"
- inputText: "test@example.com"
- hideKeyboard
- assertVisible:
    id: "email-display"
    text: "test@example.com"

# ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›
- tapOn:
    id: "password-input"
- inputText: "password123"
- hideKeyboard

# å…¥åŠ›å€¤ã®ç¢ºèªï¼ˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯ãƒã‚¹ã‚¯ã•ã‚Œã¦ã„ã‚‹ã¯ãšï¼‰
- assertVisible:
    id: "password-display"

# å…¥åŠ›å®Œäº†å¾Œã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ
- takeScreenshot: screenshots/${output.platform}/login-form-filled

# ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—
- tapOn:
    id: "login-button"

# ã‚¢ãƒ©ãƒ¼ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
- assertVisible: "ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ"

# ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ
- takeScreenshot: screenshots/${output.platform}/login-success

# ã‚¢ãƒ©ãƒ¼ãƒˆã‚’é–‰ã˜ã‚‹
- tapOn: "OK"

# ãƒ›ãƒ¼ãƒ ã«æˆ»ã£ãŸã“ã¨ã‚’ç¢ºèª
- assertVisible: "ğŸ“š è¨˜äº‹ãƒªã‚¹ãƒˆ"

# ä¸€ç•ªä¸Šã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ç¢ºèª
- scrollUntilVisible:
    element:
        text: "Expo ãƒ¢ãƒãƒ¬ãƒ with Bun"
    direction: UP
    timeout: 10000
- assertVisible: "Expo ãƒ¢ãƒãƒ¬ãƒ with Bun"
