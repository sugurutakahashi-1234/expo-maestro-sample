appId: com.sugurutakahashi.coolapp
---
# ==========================================
# Maestro ãƒ†ã‚¹ãƒˆå®Ÿè£…æ™‚ã®ãƒãƒã‚Šãƒã‚¤ãƒ³ãƒˆé›†
# ==========================================
#
# 1. Maestro Studioã¨CLIã®åŒæ™‚ä½¿ç”¨ä¸å¯ï¼ˆæœ€é‡è¦ï¼ï¼‰
#    - Maestro StudioãŒèµ·å‹•ã—ã¦ã„ã‚‹ã¨ã€CLIã§launchAppãŒæ©Ÿèƒ½ã—ãªã„
#    - ãƒãƒ¼ãƒˆ7001ã®ç«¶åˆãŒåŸå› ï¼ˆä¸¡è€…ãŒåŒã˜ãƒãƒ¼ãƒˆã‚’ä½¿ç”¨ï¼‰
#    - å¯¾ç­–: CLIãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚ã¯å¿…ãšMaestro Studioã‚’çµ‚äº†ã™ã‚‹
#    - å‚è€ƒ: https://github.com/mobile-dev-inc/maestro/issues/1927
#
# 2. iOSã§ã®accessibilityLabelå¿…é ˆ
#    - iOSã§ã¯accessibilityLabelã‚’è¨­å®šã—ãªã„ã¨MaestroãŒè¦ç´ ã‚’èªè­˜ã§ããªã„
#    - ç‰¹ã«ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ãƒœã‚¿ãƒ³ãªã©ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªè¦ç´ ã§å¿…é ˆ
#    - React Nativeã®accessibilityLabelå±æ€§ã‚’ä½¿ç”¨ã—ã¦è¨­å®šã™ã‚‹
#    - å‚è€ƒ: https://reactnative.dev/docs/accessibility#accessibilitylabel
#    - å‚è€ƒ: https://docs.maestro.dev/platform-support/ios-uikit
#
# 3. iOSã®ç‰©ç†ãƒ‡ãƒã‚¤ã‚¹ã¯éå¯¾å¿œ
#    - Maestroã¯ç¾æ™‚ç‚¹ã§iOSã®ç‰©ç†ãƒ‡ãƒã‚¤ã‚¹ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„
#    - iOSãƒ†ã‚¹ãƒˆã¯ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã®ã¿ã§å®Ÿè¡Œå¯èƒ½
#    - Androidã¯ç‰©ç†ãƒ‡ãƒã‚¤ã‚¹ã§ã‚‚ãƒ†ã‚¹ãƒˆå¯èƒ½
#    - å‚è€ƒ: https://docs.maestro.dev/getting-started/installing-maestro#connecting-to-your-device
#
# 4. ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãƒ‘ã‚¹ã®æŒ‡å®šæ–¹æ³•
#    - ãƒ‘ã‚¹ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã‹ã‚‰ã®ç›¸å¯¾ãƒ‘ã‚¹ã¨ã—ã¦è§£é‡ˆã•ã‚Œã‚‹
#    - ".maestro/screenshots/ios/xxx" â†’ ".maestro/screenshots/ios/xxx.png" ã«ä¿å­˜ã•ã‚Œã‚‹
#    - runFlowå†…ã§ã‚‚åŒæ§˜ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã‹ã‚‰ã®ç›¸å¯¾ãƒ‘ã‚¹ã§æŒ‡å®šã™ã‚‹
#
# 5. maestro.platformã‚’ä½¿ã£ãŸå‹•çš„ãƒ‘ã‚¹ç”Ÿæˆ
#    - evalScriptã§ä¸€åº¦ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’å–å¾—: evalScript: ${output.platform = maestro.platform}
#    - ä»¥é™ã€å¤‰æ•°å±•é–‹ã§ãƒ‘ã‚¹ã‚’å‹•çš„ç”Ÿæˆ: .maestro/screenshots/${output.platform}/home-tab
#    - ã“ã‚Œã«ã‚ˆã‚Šã€runFlow + when ã‚’ä½¿ã‚ãšã«ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¥ã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆä¿å­˜ãŒå¯èƒ½
#
# 6. whenæ¡ä»¶ã¯runFlowã¨runScriptã§ã®ã¿ä½¿ç”¨å¯èƒ½
#    - ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ†å²ï¼ˆwhen: platform: android/iosï¼‰ã‚’ä½¿ã„ãŸã„å ´åˆã€
#      å¿…ãšrunFlowã¾ãŸã¯runScriptã§å›²ã‚€å¿…è¦ãŒã‚ã‚‹
#    - takeScreenshotã€tapOnã€assertVisibleãªã©ã®é€šå¸¸ã‚³ãƒãƒ³ãƒ‰ã«ç›´æ¥whenã¯ä½¿ãˆãªã„
#    - ä¾‹: - takeScreenshot: xxx ã« when: platform: ios ã¯ä»˜ã‘ã‚‰ã‚Œãªã„
#    - æ­£ã—ãã¯: - runFlow: { when: { platform: ios }, commands: [- takeScreenshot: xxx] }
#    - å‚è€ƒ: https://docs.maestro.dev/advanced/conditions
#
# 7. Maestro CLIã®ä¸¦åˆ—å®Ÿè¡Œä¸å¯
#    - è¤‡æ•°ã®Maestro CLIã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’åŒæ™‚å®Ÿè¡Œã§ããªã„
#    - ã™ã¹ã¦ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒãƒãƒ¼ãƒˆ7001ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ç«¶åˆã™ã‚‹
#    - iOSã¨Androidã®ãƒ†ã‚¹ãƒˆã‚’ä¸¦è¡Œå®Ÿè¡Œ(concurrentlyç­‰)ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ
#    - ã‚¨ãƒ©ãƒ¼ä¾‹: "java.io.IOException: Command failed (tcp:7001): closed"
#    - å¯¾ç­–: é †æ¬¡å®Ÿè¡Œï¼ˆ&&ï¼‰ã‚’ä½¿ç”¨ã™ã‚‹
#    - ä¾‹: "bun run maestro:ios && bun run maestro:android"
#
# 8. VRT (Visual Regression Testing) ã®ãŸã‚ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼å›ºå®š
#    - ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆæ¯”è¼ƒæ™‚ã«æ™‚åˆ»ã‚„ãƒãƒƒãƒ†ãƒªãƒ¼æ®‹é‡ã®å·®ç•°ã‚’é˜²ããŸã‚ã€
#      ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ã‚’å›ºå®šå€¤ã«ã‚ªãƒ¼ãƒãƒ©ã‚¤ãƒ‰ã™ã‚‹
#    - iOS: xcrun simctl status_bar ã‚³ãƒãƒ³ãƒ‰ã§å›ºå®šï¼ˆ9:41, ãƒãƒƒãƒ†ãƒªãƒ¼100%ç­‰ï¼‰
#    - Android: adb Demo Modeã§å›ºå®šï¼ˆ9:41, ãƒãƒƒãƒ†ãƒªãƒ¼100%ç­‰ï¼‰
#    - package.jsonã® statusbar:ios ã¨ statusbar:android ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§è‡ªå‹•è¨­å®š
#    - maestro:ios ã¨ maestro:android å®Ÿè¡Œæ™‚ã«è‡ªå‹•ã§é©ç”¨ã•ã‚Œã‚‹
#
# 9. VRT (Visual Regression Testing) ç’°å¢ƒ
#    - ãƒ„ãƒ¼ãƒ«: reg-suit + Google Cloud Storage
#    - ãƒã‚±ãƒƒãƒˆ: vrt-sample (asia-northeast1)
#    - èªè¨¼: apps/cool-app/vrt-sample-4dde33b657e4.json
#    - ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆä¿å­˜å…ˆ: .maestro/snapshots/ (GCSç®¡ç†ã€Gitç®¡ç†å¤–)
#    - å·®åˆ†é–¾å€¤: 0.1% (thresholdRate: 0.001)
#    - ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¥: ios/android
#
#    ã€é‹ç”¨æ–¹é‡ã€‘
#    - VRTã¯å®Œå…¨ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œï¼ˆCI/CDè‡ªå‹•åŒ–ãªã—ï¼‰
#    - å¿…è¦ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§æ‰‹å‹•ã§ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’ä½œæˆ
#    - ä»»æ„ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆåŒå£«ã‚’æ¯”è¼ƒå¯èƒ½
#
#    ã€ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆå‘½åè¦å‰‡ã€‘
#    {version}_{branch}_{YYYYMMDD-HHmm}_{hash}
#    ä¾‹: 1.0.0_main_20251118-1430_abc123def456
#
#    ã€åŸºæœ¬çš„ãªä½¿ã„æ–¹ã€‘
#    1. Maestroãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆå–å¾—ï¼‰
#       bun run maestro:ios
#
#    2. ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆä½œæˆ
#       bun run vrt:snapshot
#       â†’ .maestro/snapshots/1.0.0_main_20251118-1430_abc123def456/ ã«ä¿å­˜
#
#    3. ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆä¸€è¦§è¡¨ç¤º
#       bun run vrt:list
#
#    4. ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆæ¯”è¼ƒ
#       bun run vrt:compare <æœŸå¾…å€¤ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå> <å®Ÿéš›ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå>
#       ä¾‹: bun run vrt:compare 1.0.0_main_20251118-1430_abc123def456 1.1.0_main_20251120-0900_789012345678
#
#    ã€å®Ÿè·µä¾‹ã€‘
#    - ãƒªãƒªãƒ¼ã‚¹å‰ã®UIç¢ºèª:
#      mainã¨ãƒªãƒªãƒ¼ã‚¹ãƒ–ãƒ©ãƒ³ãƒã§ãã‚Œãã‚Œã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆä½œæˆ â†’ æ¯”è¼ƒ
#
#    - feature branchã®å½±éŸ¿ç¯„å›²ç¢ºèª:
#      mainã§ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ä½œæˆ â†’ feature branchã§ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆä½œæˆ â†’ æ¯”è¼ƒ
#
#    - éå»ã®ã‚³ãƒŸãƒƒãƒˆã¨ã®æ¯”è¼ƒ:
#      éå»ã®ã‚³ãƒŸãƒƒãƒˆã‚’checkout â†’ Maestroå®Ÿè¡Œ â†’ ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆä½œæˆ â†’ æ¯”è¼ƒ
#
#    ã€è©³ç´°ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€‘
#    è©³ç´°ã¯ VRT.md ã‚’å‚ç…§
#
#    ã€æ¤œè¨¼æ¸ˆã¿ã€‘
#    - Changed items: 1 (çµµæ–‡å­—å¤‰æ›´ âœ¨ â†’ ğŸ‰ ã‚’æ­£ã—ãæ¤œå‡º)
#    - GCSã‹ã‚‰ã®ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ­£å¸¸å‹•ä½œ
#    - å·®åˆ†ç”»åƒç”Ÿæˆæ­£å¸¸å‹•ä½œ
#
# ==========================================

- launchApp:
    appId: "com.sugurutakahashi.coolapp"
    clearState: true

# maestro.platformã‚’ä½¿ç”¨ã—ãŸãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¤å®šï¼ˆæœ€åˆã«1å›ã ã‘å®Ÿè¡Œï¼‰
- evalScript: ${output.platform = maestro.platform}

# ãƒ›ãƒ¼ãƒ ç”»é¢ã®ç¢ºèª
- assertVisible: "Expo ãƒ¢ãƒãƒ¬ãƒ with Bun ğŸ‰"
- assertVisible: "ğŸ“š è¨˜äº‹ãƒªã‚¹ãƒˆ"
- takeScreenshot: .maestro/screenshots/${output.platform}/home-tab

# è¨˜äº‹ãƒªã‚¹ãƒˆã®ç¢ºèªã¨è©³ç´°ç”»é¢ã¸ã®é·ç§»
- assertVisible: "Expo Routerã®å§‹ã‚æ–¹"
- tapOn: "Expo Routerã®å§‹ã‚æ–¹"
- assertVisible: "è¨˜äº‹è©³ç´°"
- assertVisible: "ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«"

# æˆ»ã‚‹
- runFlow:
    when:
      platform: android
    commands:
      - tapOn: Navigate up
- runFlow:
    when:
      platform: ios
    commands:
      - tapOn: è¨˜äº‹ä¸€è¦§

# ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚¹ãƒˆ - é·ç§»ã‚¿ãƒ–
- tapOn: "é·ç§»"
- assertVisible: "ç”»é¢é·ç§»ãƒ‡ãƒ¢"
- takeScreenshot: .maestro/screenshots/${output.platform}/transition-tab

# ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚¹ãƒˆ - ã“ã®ã‚¢ãƒ—ãƒªã«ã¤ã„ã¦
- tapOn: "ã“ã®ã‚¢ãƒ—ãƒªã«ã¤ã„ã¦"
- assertVisible: "ã“ã®ã‚¢ãƒ—ãƒªã«ã¤ã„ã¦ã®èª¬æ˜"
- takeScreenshot: .maestro/screenshots/${output.platform}/about-tab

# ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚¹ãƒˆ - ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
- tapOn: "ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«"
- assertVisible: "ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±"
- takeScreenshot: .maestro/screenshots/${output.platform}/profile-tab
# ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹
- tapOn: "ãƒ›ãƒ¼ãƒ "
- assertVisible: "ğŸ“š è¨˜äº‹ãƒªã‚¹ãƒˆ"

# ãƒ­ã‚°ã‚¤ãƒ³ãƒ‡ãƒ¢ãƒœã‚¿ãƒ³ã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
- scrollUntilVisible:
    element:
        text: "ãƒ­ã‚°ã‚¤ãƒ³ãƒ‡ãƒ¢ (Maestroãƒ†ã‚¹ãƒˆç”¨)"
    direction: DOWN
    timeout: 10000

# ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã®ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ãƒ†ã‚¹ãƒˆ
- tapOn: "ãƒ­ã‚°ã‚¤ãƒ³ãƒ‡ãƒ¢ (Maestroãƒ†ã‚¹ãƒˆç”¨)"
- assertVisible: "ãƒ­ã‚°ã‚¤ãƒ³"
- assertVisible: "Maestroãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ãƒ‡ãƒ¢"

# ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å…¥åŠ›
- tapOn:
    id: "email-input"
- inputText: "test@example.com"
- hideKeyboard
- assertVisible:
    id: "email-display"
    text: "test@example.com"

# ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›
- tapOn:
    id: "password-input"
- inputText: "password123"
- hideKeyboard

# å…¥åŠ›å€¤ã®ç¢ºèªï¼ˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯ãƒã‚¹ã‚¯ã•ã‚Œã¦ã„ã‚‹ã¯ãšï¼‰
- assertVisible:
    id: "password-display"

# å…¥åŠ›å®Œäº†å¾Œã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ
- takeScreenshot: .maestro/screenshots/${output.platform}/login-form-filled

# ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã‚’ã‚¿ãƒƒãƒ—
- tapOn:
    id: "login-button"

# ã‚¢ãƒ©ãƒ¼ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
- assertVisible: "ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ"

# ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸã®ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ
- takeScreenshot: .maestro/screenshots/${output.platform}/login-success

# ã‚¢ãƒ©ãƒ¼ãƒˆã‚’é–‰ã˜ã‚‹
- tapOn: "OK"

# ãƒ›ãƒ¼ãƒ ã«æˆ»ã£ãŸã“ã¨ã‚’ç¢ºèª
- assertVisible: "ğŸ“š è¨˜äº‹ãƒªã‚¹ãƒˆ"

# ä¸€ç•ªä¸Šã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ç¢ºèª
- scrollUntilVisible:
    element:
        text: "Expo ãƒ¢ãƒãƒ¬ãƒ with Bun ğŸ‰"
    direction: UP
    timeout: 10000
- assertVisible: "Expo ãƒ¢ãƒãƒ¬ãƒ with Bun ğŸ‰"
